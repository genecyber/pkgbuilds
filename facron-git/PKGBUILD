# Maintainer: Andy Weidenbaum <archbaum@gmail.com>

pkgname=facron-git
_gitname='facron'
pkgver=v0.9.6.gb1007bd
pkgrel=1
pkgdesc="Advanced filesystem cron based on fanotify"
arch=('any')
depends=('autoconf')
makedepends=('gcc' 'git' 'make')
url="https://github.com/Keruspe/facron"
license=('GPL3')
source=(git://github.com/Keruspe/facron.git)
sha256sums=('SKIP')
provides=('facron')
conflicts=('facron')

pkgver() {
  cd $_gitname
  git describe --always | sed 's|-|.|g'
}

build() {
  cd $_gitname

  msg "Building..."
  ./autogen.sh
  ./configure --sysconfdir=/etc --with-systemdsystemunitdir=/usr/lib/systemd/system
  make
}

package() {
  cd $_gitname

  msg 'Installing...'
  make DESTDIR="$pkgdir" install

  msg 'Cleaning up pkgdir...'
  find "$pkgdir" -type d -name .git -exec rm -r '{}' +
}
