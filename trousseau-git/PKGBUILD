# Maintainer: Andy Weidenbaum <archbaum@gmail.com>

pkgname=trousseau-git
pkgver=r158.7c1e8b4
pkgrel=1
pkgdesc="Networked and encrypted key-value database"
arch=('any')
depends=('gnome-keyring' 'gnupg')
makedepends=('git' 'go')
url="https://github.com/oleiade/trousseau"
license=('MIT')
source=(git+https://github.com/oleiade/trousseau)
sha256sums=('SKIP')
provides=('trousseau')
conflicts=('trousseau')

pkgver() {
  cd ${pkgname%-git}
  printf "r%s.%s" "$(git rev-list --count HEAD)" "$(git rev-parse --short HEAD)"
}

build() {
  cd ${pkgname%-git}

  msg 'Building...'
  make all
}

package() {
  cd ${pkgname%-git}

  msg 'Installing...'
  install -Dm755 bin/trousseau "$pkgdir/usr/bin/trousseau"
}
